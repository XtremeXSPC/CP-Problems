{
  "version": "0.2.0",
  "configurations": [
    {
      // ----- Competitive Programming Task (macOS) ----- //
      // Uses CodeLLDB and redirects input.txt to stdin.
      "name": "Debug (Competitions) - CodeLLDB",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/bin/Tester",
      "args": [],
      "cwd": "${workspaceFolder}",
      "preLaunchTask": "Build (Debug)",
      "stdio": ["${workspaceFolder}/input.txt", null, null]
    },
    {
      // ----- Standard Debug Task (macOS) ----- //
      "name": "Debug (macOS) - CodeLLDB",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/bin/Tester",
      "args": [],
      "cwd": "${workspaceFolder}",
      "preLaunchTask": "Build (Debug)",
      "sourceLanguages": ["cpp"],
      "initCommands": [
        "command script import /Users/lcs-dev/.lldb/LLDB_Formatters"
      ]
    },
    {
      // ----- Standard Debug Task (macOS) ----- //
      "name": "Debug (Linux) - CodeLLDB",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/bin/Tester",
      "args": [],
      "cwd": "${workspaceFolder}",
      "preLaunchTask": "Build (Debug)",
      "sourceLanguages": ["cpp"],
      "initCommands": [
        "command script import /home/lcs-dev/.lldb/LLDB_Formatters"
      ]
    },
    {
      // ----- Debug with MS C/C++ Extension (macOS) ----- //
      "name": "Debug (macOS) - MS C/C++",
      "type": "cppdbg",
      "request": "launch",
      "program": "${workspaceFolder}/bin/Tester",
      "args": [],
      "stopAtEntry": false,
      "cwd": "${workspaceFolder}",
      "environment": [],
      "externalConsole": false,
      "MIMode": "lldb",
      "setupCommands": [
        {
          "description": "Load Custom LLDB Formatters",
          "text": "command script import /Users/lcs-dev/.lldb/lldb_formatters.py",
          "ignoreFailures": false
        }
      ]
    },
    {
      // ----- Debug with user-provided arguments (macOS) ----- //
      "name": "Debug with Arguments (macOS)",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/bin/Tester",
      "args": ["${input:debugArgs}"],
      "cwd": "${workspaceFolder}",
      "preLaunchTask": "Build (Debug)"
    },
    {
      // ----- Cross-Platform Debug Configuration with Input Support ----- //
      "name": "Debug C/C++ (Cross-Platform with Input)",
      "type": "cppdbg",
      "request": "launch",
      "program": "${workspaceFolder}/bin/Tester",
      "args": [],
      "stopAtEntry": false,
      "cwd": "${workspaceFolder}",
      "environment": [],
      "externalConsole": false,
      "preLaunchTask": "Build (Debug)",

      // ----- Platform-specific Configuration ----- //
      "windows": {
        "program": "${workspaceFolder}/bin/Tester.exe",
        "MIMode": "gdb",
        "miDebuggerPath": "C:/msys64/mingw64/bin/gdb.exe",
        "args": ["<", "${workspaceFolder}/input.txt"]
      },
      "linux": {
        "program": "${workspaceFolder}/bin/Tester",
        "MIMode": "gdb",
        "miDebuggerPath": "/usr/bin/gdb",
        "args": ["<", "${workspaceFolder}/input.txt"]
      },
      "osx": {
        "program": "${workspaceFolder}/bin/Tester",
        "MIMode": "lldb",
        "stdio": ["${workspaceFolder}/input.txt", null, null]
      },

      // ----- Input Redirection from input.txt ----- //
      "console": "integratedTerminal",
      "setupCommands": [
        {
          "description": "Load Custom LLDB Formatters (macOS)",
          "text": "command script import /Users/lcs-dev/.lldb/LLDB_Formatters",
          "ignoreFailures": true
        },
        {
          "description": "Enable Pretty-Printing for GDB (Linux/Windows)",
          "text": "-enable-pretty-printing",
          "ignoreFailures": true
        },
        {
          "description": "Set inline breakpoint strategy (LLDB)",
          "text": "settings set target.inline-breakpoint-strategy always",
          "ignoreFailures": true
        }
      ]
    }
  ]
}
