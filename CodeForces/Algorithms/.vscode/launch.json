{
  //===-------------------------------------------------------------------------===//
  // VS Code debug profiles for Competitive Programming workspaces.
  //
  // Notes:
  // - binary path is kept aligned with current CP build layout: ${workspaceFolder}/bin/<target>
  // - preLaunchTask names map to centralized tasks.json entries
  // - sanitizer profile runs through dedicated sanitizer build task
  //===-------------------------------------------------------------------------===//
  "version": "0.2.0",
  "configurations": [
    {
      "name": "CP: Debug Active File (CodeLLDB, Sample Input)",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/bin/${fileBasenameNoExtension}",
      "args": [],
      "cwd": "${workspaceFolder}",
      "preLaunchTask": "Build: Active File (Debug)",
      "stdio": ["${workspaceFolder}/input_cases/${fileBasenameNoExtension}.in", null, null],
      "sourceLanguages": ["cpp"],
      "terminal": "console",
      "stopOnEntry": false,
      "initCommands": [
        "command script import ~/.lldb/LLDB_Formatters",
        "settings set target.inline-breakpoint-strategy always",
        "settings set target.prefer-dynamic-value run-target"
      ]
    },
    {
      "name": "CP: Debug Active File (CodeLLDB, Args Prompt)",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/bin/${fileBasenameNoExtension}",
      "args": ["${input:debugArgs}"],
      "cwd": "${workspaceFolder}",
      "preLaunchTask": "Build: Active File (Debug)",
      "sourceLanguages": ["cpp"],
      "terminal": "integrated",
      "stopOnEntry": false,
      "initCommands": [
        "command script import ~/.lldb/LLDB_Formatters",
        "settings set target.inline-breakpoint-strategy always",
        "settings set target.prefer-dynamic-value run-target"
      ]
    },
    {
      "name": "CP: Debug Active File (CodeLLDB, Sanitize Clang)",
      "type": "lldb",
      "request": "launch",
      "program": "${workspaceFolder}/bin/${fileBasenameNoExtension}",
      "args": [],
      "cwd": "${workspaceFolder}",
      "preLaunchTask": "Build: Active File (Sanitize, Clang)",
      "sourceLanguages": ["cpp"],
      "terminal": "integrated",
      "stopOnEntry": false,
      "env": {
        "ASAN_OPTIONS": "detect_leaks=1:check_initialization_order=1:strict_init_order=1:detect_stack_use_after_return=1:halt_on_error=1",
        "UBSAN_OPTIONS": "print_stacktrace=1:halt_on_error=1",
        "LSAN_OPTIONS": "verbosity=1:log_threads=1",
        "TERM": "xterm-256color"
      },
      "initCommands": [
        "command script import ~/.lldb/LLDB_Formatters",
        "settings set target.inline-breakpoint-strategy always",
        "settings set target.prefer-dynamic-value run-target"
      ]
    },
    {
      "name": "CP: Debug Active File (GDB, Linux)",
      "type": "cppdbg",
      "request": "launch",
      "program": "${workspaceFolder}/bin/${fileBasenameNoExtension}",
      "args": [],
      "stopAtEntry": false,
      "cwd": "${workspaceFolder}",
      "preLaunchTask": "Build: Active File (Debug)",
      "environment": [
        {
          "name": "TERM",
          "value": "xterm-256color"
        }
      ],
      "externalConsole": false,
      "linux": {
        "MIMode": "gdb",
        "miDebuggerPath": "/usr/bin/gdb"
      },
      "setupCommands": [
        {
          "description": "Enable GDB pretty printing",
          "text": "-enable-pretty-printing",
          "ignoreFailures": true
        },
        {
          "description": "Prefer Intel disassembly flavor",
          "text": "set disassembly-flavor intel",
          "ignoreFailures": true
        },
        {
          "description": "Hide thread event noise",
          "text": "set print thread-events off",
          "ignoreFailures": true
        }
      ]
    }
  ],
  "inputs": [
    {
      "id": "debugArgs",
      "type": "promptString",
      "description": "Program arguments for the active target",
      "default": ""
    }
  ]
}
